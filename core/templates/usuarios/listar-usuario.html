{% extends 'baseUsuarios.html' %}
{% load static %}
{% block styles %}
<link rel="stylesheet" href="{% static 'css/main.css' %}">
<link rel="stylesheet" href="{% static 'css/modal.css' %}">
{% endblock %}
{% block content %}
<div class="row mt-3">
    <div class="col-sm-12 col-md-12 col-lg-12 col-xl-12 text-center ">
        <h1>Administraci칩n De Usuarios</h1>
    </div>

</div>
<div class="row mt-3">
    <div class="col-sm-12 col-md-12 col-lg-12 col-xl-12 text-center">
        <a href="{%url 'crearUsuario'%}" class="btn btn-primary">Crear Usuario</a>
    </div>

</div>

<div class="row mt-3">
    <div class="col-sm-12 col-md-12 col-lg-12 col-xl-12">
        <div class="table table-striped table-hover table-resposive-sm">
            <table class="table table-dark table-sm table-striped ">
                <thead>
                    <tr>
                        <th>Nombre Completo</th>
                        <th>RUT</th>
                        <th>Editar</th>
                    </tr>
                </thead>
                <tbody>
                    {% for p in Personas %}
                    <tr>
                        <td>{{p.p_nombre}} {{p.app_paterno}} {{p.app_materno}}</td>
                        <td>{{p.run}} - {{p.dv}}</td>
                        <td>
                            <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#myModal{{p.id_persona}}">
                                M치s Informaci칩n
                            </button>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>

{% for p in Personas %}
<!-- Modal -->
<div class="modal fade" id="myModal{{p.id_persona}}" tabindex="-1" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <div class="container-fluid">
                    <div class="row">
                        <h2 class="text-center" id="myModalLabel">{{p.p_nombre|upper}} {{p.s_nombre|upper}}</h2> 
                        <h2 class="text-center" id="myModalLabel"> {{p.app_paterno|upper}} {{p.app_materno|upper}}</h2>
                    </div>
                    <div class="row">
                        <h4 class="modal-title col-11 text-center" id="myModalLabel"> {{p.run}} - {{p.dv}}</h4>
                    </div>
                </div>
            </div>
            <div class="modal-body">
                <div class="col-6">
                    <table class="table">
                        <tr>
                            <th>Nacionalidad:</th>
                            <td>{{p.nacionalidad}}</td>
                        </tr>
                        <tr>
                            <th>Telefono Fijo:</th>
                            <td>{{p.telefono_fijo}}</td>
                        </tr>
                        <tr>
                            <th>Celular de emergencias:</th>
                            <td>{{p.celular}}</td>
                        </tr>
                        <tr>
                            <th>Fecha de nacimiento:</th>
                            <td>{{p.fecha_nac}}</td>
                        </tr>
                        <tr>
                            <th>Email:</th>
                            {% if not p.email %}
                                <td>Sin informaci칩n</td>
                            {% else %}
                                <td>{{p.email}}</td>
                            {% endif %}
                        </tr>
                    </table>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary">Save changes</button>
            </div>
        </div>
    </div>
</div>
{% endfor %}

{%endblock%}

{% block script %}

{% endblock %}